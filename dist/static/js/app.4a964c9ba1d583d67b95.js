webpackJsonp([1],{"2+By":function(t,s){},"2Qkz":function(t,s,e){t.exports=e.p+"static/img/bg-4.989414c.jpg"},"7zRH":function(t,s,e){t.exports=e.p+"static/img/bg-5.0e00744.jpg"},"8m4O":function(t,s,e){t.exports=e.p+"static/img/bg-1.e0cfd75.jpg"},AmYl:function(t,s){},"D9+L":function(t,s,e){t.exports=e.p+"static/img/jumbotron-bg.e49f7b4.jpg"},JNEu:function(t,s,e){t.exports=e.p+"static/img/bg-3.af8ca8f.jpg"},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),i=e("mtWM"),r=e.n(i),o=e("Rf8U"),n=e.n(o),c=(e("K3J8"),e("ZZvs")),l=e.n(c),d=(e("SYh3"),e("C/JF")),u=e("fhbW"),p=e("1e6/"),v=e("sUu7"),m=e("1SbN"),_=e.n(m),h=(e("oPmM"),{render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]});var g=e("VU/8")({name:"App"},h,!1,function(t){e("AmYl")},null,null).exports,f=e("/ocq"),C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[e("a",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{href:"#"}},[t._v("漫遊旅遊後台")]),t._v(" "),e("ul",{staticClass:"navbar-nav px-3"},[e("li",{staticClass:"nav-item text-nowrap"},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.signout(s)}}},[e("font-awesome-icon",{attrs:{icon:["fa","sign-out-alt"]}}),t._v("\n            Sign out\n          ")],1)])])])])},staticRenderFns:[]},b=e("VU/8")({methods:{signout:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/logout").then(function(s){s.data.success&&t.$router.push("/login")})}}},C,!1,null,null,null).exports,x={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[e("div",{staticClass:"sidebar-sticky "},[t._m(0),t._v(" "),e("ul",{staticClass:"nav flex-column"},[e("li",{staticClass:"nav-item",on:{click:function(s){return t.orderlistActive("products")}}},[e("router-link",{staticClass:"nav-link",class:{active:"products"===t.sidelistActive},attrs:{to:"/dashboard/products"}},[e("font-awesome-icon",{attrs:{icon:["fa","store"]}}),t._v("\n        產品列表")],1)],1),t._v(" "),e("li",{staticClass:"nav-item ",on:{click:function(s){return t.orderlistActive("orders")}}},[e("router-link",{staticClass:"nav-link",class:{active:"orders"===t.sidelistActive},attrs:{to:"/dashboard/orders"}},[e("font-awesome-icon",{attrs:{icon:["fa","copy"]}}),t._v("\n         訂單列表")],1)],1),t._v(" "),e("li",{staticClass:"nav-item",on:{click:function(s){return t.orderlistActive("coupon")}}},[e("router-link",{staticClass:"nav-link",class:{active:"coupon"===t.sidelistActive},attrs:{to:"/dashboard/coupon"}},[e("font-awesome-icon",{attrs:{icon:["fa","ticket-alt"]}}),t._v("\n        優惠卷")],1)],1)]),t._v(" "),t._m(1),t._v(" "),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item",on:{click:function(s){return t.orderlistActive("simulationorder")}}},[e("router-link",{staticClass:"nav-link",class:{active:"simulationorder"===t.sidelistActive},attrs:{to:"/dashboard/simulationorder"}},[e("font-awesome-icon",{attrs:{icon:["fa","shopping-cart"]}}),t._v("\n        模擬訂單")],1)],1)])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[s("span",[this._v("管理員")]),this._v(" "),s("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[s("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[s("span",[this._v("訂單模擬功能")]),this._v(" "),s("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[s("span",{attrs:{"data-feather":"plus-circle"}})])])}]},y=e("VU/8")({data:function(){return{sidelistActive:""}},methods:{orderlistActive:function(t){this.sidelistActive=t}},created:function(){this.sidelistActive=this.$route.name}},x,!1,null,null,null).exports,w={data:function(){return{messages:[]}},methods:{updateMessage:function(t,s){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:s,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var s=this;setTimeout(function(){s.messages.forEach(function(e,a){e.timestamp===t&&s.messages.splice(a,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("messsage:push",function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(s,e)}),t.$bus.$emit("message:push")}},$={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"message-alert"},t._l(t.messages,function(s,a){return e("div",{key:a,staticClass:"alert alert-dismissible",class:"alert-"+s.status},[t._v("\n    "+t._s(s.message)+"\n    "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(s){return t.removeMessage(a)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},staticRenderFns:[]};var k=e("VU/8")(w,$,!1,function(t){e("bu+X")},null,null).exports,P={components:{Navbar:b,Sidebar:y,AlertMessage:k}},S={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("Navbar"),this._v(" "),s("AlertMessage"),this._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("Sidebar"),this._v(" "),s("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[s("router-view")],1)],1)])],1)},staticRenderFns:[]},E=e("VU/8")(P,S,!1,null,null,null).exports,M={name:"login",data:function(){return{user:{username:"",password:""},isMesssage:!0,messsage:"",travelBg:e("xq6e")}},methods:{signin:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(s){console.log(s.data),s.data.success?t.$router.push("/dashboard/products"):(t.isMesssage=!1,t.messsage=s.data.message)})}},watch:{isMesssage:function(t){var s=this;console.log("我監控到了"),setTimeout(function(){s.isMesssage=!0},5e3)}}},N={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"bgImg",style:{backgroundImage:"url("+t.travelBg+")"}},[e("form",{staticClass:"form-signin",on:{submit:function(s){return s.preventDefault(),t.signin(s)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("漫步旅遊")]),t._v(" "),t.isMesssage?t._e():e("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[t._v("\n      "+t._s(t.messsage)+"\n    ")]),t._v(" "),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(s){s.target.composing||t.$set(t.user,"username",s.target.value)}}}),t._v(" "),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(s){s.target.composing||t.$set(t.user,"password",s.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-lg btn-primary btn-block mt-5",attrs:{type:"submit"}},[t._v("Sign in")]),t._v(" "),e("p",{staticClass:"mt-5 mb-3 text-white"},[t._v("© 2019 漫步旅遊")])])])},staticRenderFns:[]};var L=e("VU/8")(M,N,!1,function(t){e("bSdT")},"data-v-a1c63b0a",null).exports,A=e("woOf"),q=e.n(A),O=e("7t+N"),U=e.n(O),j={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[1!==t.pagination.total_pages?e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{directives:[{name:"show",rawName:"v-show",value:t.pagination.has_pre,expression:"pagination.has_pre"}],staticClass:"page-item",on:{click:function(s){return s.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[t._m(0)]),t._v(" "),t._l(t.pagination.total_pages,function(s){return e("li",{key:s,staticClass:"page-item",class:{active:t.pagination.current_page===s},on:{click:function(e){return e.preventDefault(),t.getProducts(s)}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v(t._s(s))])])}),t._v(" "),e("li",{directives:[{name:"show",rawName:"v-show",value:t.pagination.has_next,expression:"pagination.has_next"}],staticClass:"page-item",on:{click:function(s){return s.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[t._m(1)])],2)]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("«")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("»")])])}]},T=e("VU/8")({props:["pagination"],methods:{getProducts:function(t){this.$emit("getPages",t)}}},j,!1,null,null,null).exports,F={components:{pagination:T},data:function(){return{products:[],tempProducts:{},isNew:!1,pagination:{},loadStatus:{pageLoading:!1,uploadLoading:!1}}},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/exercise-api08/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),s=this;s.loadStatus.pageLoading=!0,this.$http.get(t).then(function(t){s.products=t.data.products,s.pagination=t.data.pagination,s.loadStatus.pageLoading=!1})},openModel:function(t,s){t?(this.tempProducts={},this.isNew=!0):(this.tempProducts=q()({},s),this.isNew=!1),U()("#productModal").modal("show")},updateProduct:function(){var t=this,s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/product",a="post";s.isNew||(e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/product/"+s.tempProducts.id,a="put"),this.$http[a](e,{data:s.tempProducts}).then(function(e){e.data.success?(U()("#productModal").modal("hide"),s.getProducts(),t.$bus.$emit("messsage:push",e.data.message,"success")):(s.getProducts(),t.$bus.$emit("messsage:push",e.data.message,"danger"))})},deleteModel:function(t){this.tempProducts=q()({},t),U()("#delProductModal").modal("show")},deleteProduct:function(){var t=this,s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/product/"+s.tempProducts.id;this.$http.delete(e).then(function(e){e.data.message?(s.getProducts(),U()("#delProductModal").modal("hide"),t.$bus.$emit("messsage:push",e.data.message,"success")):t.$bus.$emit("messsage:push",e.data.message,"danger")})},uploadFile:function(){var t=this,s=this.$refs.files.files[0];if(void 0!==s){var e=this,a=new FormData;a.append("file-to-upload",s);e.loadStatus.uploadLoading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/admin/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(s){s.data.imageUrl?(e.$set(e.tempProducts,"imageUrl",s.data.imageUrl),e.loadStatus.uploadLoading=!1,console.log(s.data),t.$bus.$emit("messsage:push","上傳成功","success")):(t.$bus.$emit("messsage:push",s.data.message,"danger"),e.loadStatus.uploadLoading=!1)})}}},created:function(){this.getProducts()}},I={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"text-right mt-2"},[e("button",{staticClass:"btn btn-primary",on:{click:function(s){return t.openModel(!0)}}},[t._v("建立新產品")])]),t._v(" "),e("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.products,function(s,a){return e("tr",{key:s.id,class:["list-group-item-action",{"list-group-item-secondary":a%2==0}]},[e("td",[t._v(t._s(s.category))]),t._v(" "),e("td",[t._v(t._s(s.title))]),t._v(" "),e("td",[e("img",{staticClass:"img-fluid",attrs:{src:s.imageUrl,alt:""}})]),t._v(" "),e("td",{staticClass:"text-right"},[t._v("\n                    "+t._s(t._f("currency")(s.origin_price))+"\n                    "),s.unit?e("span",{staticClass:"text-info"},[t._v("/1"+t._s(s.unit))]):t._e()]),t._v(" "),e("td",{staticClass:"text-right"},[t._v("\n                    "+t._s(t._f("currency")(s.price))+"\n                    "),s.unit?e("span",{staticClass:"text-info"},[t._v("/1"+t._s(s.unit))]):t._e()]),t._v(" "),e("td",{staticClass:"text-center"},[s.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(e){return t.openModel(!1,s)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.deleteModel(s)}}},[t._v("刪除")])])])}),0)]),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{getPages:t.getProducts}}),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"productModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"productModal"}},[t.isNew?e("span",[t._v("新增產品")]):e("span",[t._v("編輯產品")])]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.imageUrl,expression:"tempProducts.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProducts.imageUrl},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"imageUrl",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片\n                        "),t.loadStatus.uploadLoading?e("font-awesome-icon",{attrs:{icon:["fa","spinner"],spin:""}}):t._e()],1),t._v(" "),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),t._v(" "),e("img",{staticClass:"img-fluid",attrs:{src:t.tempProducts.imageUrl,alt:""}})]),t._v(" "),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.title,expression:"tempProducts.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProducts.title},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"title",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.category,expression:"tempProducts.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProducts.category},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"category",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.unit,expression:"tempProducts.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProducts.unit},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"unit",s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.origin_price,expression:"tempProducts.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProducts.origin_price},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"origin_price",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.price,expression:"tempProducts.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProducts.price},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"price",s.target.value)}}})])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.description,expression:"tempProducts.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProducts.description},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"description",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.content,expression:"tempProducts.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProducts.content},on:{input:function(s){s.target.composing||t.$set(t.tempProducts,"content",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProducts.is_enabled,expression:"tempProducts.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProducts.is_enabled)?t._i(t.tempProducts.is_enabled,null)>-1:t._q(t.tempProducts.is_enabled,1)},on:{change:function(s){var e=t.tempProducts.is_enabled,a=s.target,i=a.checked?1:0;if(Array.isArray(e)){var r=t._i(e,null);a.checked?r<0&&t.$set(t.tempProducts,"is_enabled",e.concat([null])):r>-1&&t.$set(t.tempProducts,"is_enabled",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.tempProducts,"is_enabled",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("\n                        是否啟用\n                        ")])])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"delProductModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n                是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProducts.title))]),t._v(" 商品(刪除後將無法恢復)。\n            ")]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{attrs:{width:"120"}},[t._v("分類")]),t._v(" "),e("th",[t._v("產品名稱")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("圖片")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("原價")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("售價")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("是否啟用")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("編輯")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"delProductModal"}},[s("span",[this._v("刪除產品")])]),this._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},R=e("VU/8")(F,I,!1,null,null,null).exports,V={components:{pagination:T},data:function(){return{order:{products:{},user:{}},pagination:{},loadStatus:{pageLoading:!1},tempOrders:{user:{}}}},methods:{getorder:function(){var t="https://vue-course-api.hexschool.io/api/exercise-api08/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),s=this;s.loadStatus.pageLoading=!0,this.$http.get(t).then(function(t){s.pagination=t.data.pagination,s.order=t.data.orders,s.loadStatus.pageLoading=!1})},openEditModal:function(t){U()("#orderModal").modal("show"),this.tempOrders=t},editOrder:function(){var t=this,s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/order/"+s.tempOrders.id;s.loadStatus.pageLoading=!0,this.$http.put(e,{data:s.tempOrders}).then(function(e){e.data.success?(t.$bus.$emit("messsage:push",e.data.message,"success"),s.loadStatus.pageLoading=!1,U()("#orderModal").modal("hide")):(t.$bus.$emit("messsage:push",e.data.message,"danger"),s.loadStatus.pageLoading=!1)})}},created:function(){this.getorder()},filters:{timeFormat:function(t){return new Date(1e3*parseInt(t)).toLocaleString().replace(/:\d{1,2}$/," ")}}},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.order,function(s,a){return e("tr",{key:s.id,class:["list-group-item-action",{"list-group-item-secondary":a%2==0}]},[e("td",[t._v(t._s(t._f("timeFormat")(s.create_at)))]),t._v(" "),"object"==typeof s.user?e("td",{staticClass:"text-center"},[t._v(t._s(s.user.email))]):t._e(),t._v(" "),e("td",t._l(s.products,function(s){return e("ul",{key:s.id,staticStyle:{"list-style":"none"}},[e("li",[t._v(t._s(s.product.title))])])}),0),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(s.total)))]),t._v(" "),s.is_paid?e("td",{staticClass:"text-success text-center"},[t._v("已付款")]):e("td",{staticClass:"text-center"},[t._v("未付款")]),t._v(" "),e("td",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(e){return t.openEditModal(s)}}},[t._v("\n                        編輯\n                    ")])])])}),0)]),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{getPages:t.getorder}}),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"orderModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog ",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name"}},[t._v("姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrders.user.name,expression:"tempOrders.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.tempOrders.user.name},on:{input:function(s){s.target.composing||t.$set(t.tempOrders.user,"name",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"tel"}},[t._v("電話")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrders.user.tel,expression:"tempOrders.user.tel"}],staticClass:"form-control",attrs:{type:"text",id:"tel",placeholder:"請輸入電話"},domProps:{value:t.tempOrders.user.tel},on:{input:function(s){s.target.composing||t.$set(t.tempOrders.user,"tel",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("電子郵件")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrders.user.email,expression:"tempOrders.user.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",placeholder:"請輸入信箱"},domProps:{value:t.tempOrders.user.email},on:{input:function(s){s.target.composing||t.$set(t.tempOrders.user,"email",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"address"}},[t._v("地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrders.user.address,expression:"tempOrders.user.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",placeholder:"請輸入地址"},domProps:{value:t.tempOrders.user.address},on:{input:function(s){s.target.composing||t.$set(t.tempOrders.user,"address",s.target.value)}}})])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.editOrder}},[t._v("確認")])])])])])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{staticClass:"text-center",attrs:{width:"160"}},[t._v("購買時間")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"240"}},[t._v("e-mail")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("購買款項")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("應付金額")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("是否付款")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("編輯")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header bg-dark text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"orderModal"}},[s("span",[this._v("訂單會員資訊")])]),this._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},z=e("VU/8")(V,D,!1,null,null,null).exports,B={components:{pagination:T},data:function(){return{coupons:[],tempCoupon:{},isNew:!1,pagination:{},loadStatus:{pageLoading:!1}}},methods:{getCoupon:function(){var t=this,s="https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.loadStatus.pageLoading=!0,this.$http.get(s).then(function(s){t.pagination=s.data.pagination,t.coupons=s.data.coupons,t.loadStatus.pageLoading=!1})},updateCoupon:function(){var t=this,s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupon",a="post";s.isNew||(e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupon/"+s.tempCoupon.id,a="put"),this.$http[a](e,{data:s.tempCoupon}).then(function(e){e.data.success?(U()("#newCouponModal").modal("hide"),s.getCoupon(),t.$bus.$emit("messsage:push",e.data.message,"success")):(s.getCoupon(),t.$bus.$emit("messsage:push",e.data.message,"danger"))})},openCouponModal:function(t,s){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=q()({},s),this.isNew=!1),U()("#newCouponModal").modal("show")},openDeleteModal:function(t){this.tempCoupon=q()({},t),U()("#delCouponsModal").modal("show")},deleteCoupon:function(){var t=this,s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupon/"+s.tempCoupon.id;this.$http.delete(e).then(function(e){e.data.success?(U()("#delCouponsModal").modal("hide"),s.getCoupon(),t.$bus.$emit("messsage:push",e.data.message,"success")):t.$bus.$emit("messsage:push",e.data.message,"danger")})}},created:function(){this.getCoupon()}},H={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"text-right my-2"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.openCouponModal(!0)}}},[t._v("建立新的優惠")])]),t._v(" "),e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.coupons,function(s,a){return e("tr",{key:s.id,class:["list-group-item-action",{"list-group-item-secondary":a%2==0}]},[e("td",[t._v(t._s(s.title))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(s.coupon))]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(s.percent)+"%")]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(s.time))]),t._v(" "),e("td",{staticClass:"text-center"},[1===s.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),t._v(" "),e("td",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(e){return t.openCouponModal(!1,s)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.openDeleteModal(s)}}},[t._v("刪除")])])])}),0)]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"newCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"newCouponModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog ",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"newCouponModal"}},[t.isNew?e("span",[t._v("建立新優惠")]):e("span",[t._v("編輯優惠")])]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(s){s.target.composing||t.$set(t.tempCoupon,"title",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"coupon"}},[t._v("優惠碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.coupon,expression:"tempCoupon.coupon"}],staticClass:"form-control",attrs:{type:"text",id:"coupon",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.coupon},on:{input:function(s){s.target.composing||t.$set(t.tempCoupon,"coupon",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"time"}},[t._v("到期日")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.time,expression:"tempCoupon.time"}],staticClass:"form-control",attrs:{type:"date",id:"time",placeholder:"請輸入到期日"},domProps:{value:t.tempCoupon.time},on:{input:function(s){s.target.composing||t.$set(t.tempCoupon,"time",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(s){s.target.composing||t.$set(t.tempCoupon,"percent",s.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(s){var e=t.tempCoupon.is_enabled,a=s.target,i=a.checked?1:0;if(Array.isArray(e)){var r=t._i(e,null);a.checked?r<0&&t.$set(t.tempCoupon,"is_enabled",e.concat([null])):r>-1&&t.$set(t.tempCoupon,"is_enabled",e.slice(0,r).concat(e.slice(r+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("\n                            是否啟用\n                            ")])])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delCouponsModal",tabindex:"-1",role:"dialog","aria-labelledby":"delCouponsModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n                是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠卷(刪除後將無法恢復)。\n            ")]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCoupon}},[t._v("確認刪除")])])])])]),t._v(" "),e("pagination",{attrs:{pagination:t.pagination,getPages:t.getCoupon}})],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",[t._v("名稱")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("優惠碼")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("折扣比")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("到期日")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("是否啟用")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"140"}},[t._v("編輯")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"delCouponsModal"}},[s("span",[this._v("刪除優惠卷")])]),this._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},W=e("VU/8")(B,H,!1,null,null,null).exports,J=e("pFYg"),Y=e.n(J),X={components:{pagination:T},data:function(){return{products:[],product:{},subTotal:"",ststus:{more:"",addCart:""},carts:[],tempCart:{product:{}},cartsTotal:"",counop_code:"",form:{user:{}},pagination:{},loadStatus:{pageLoading:!1}}},created:function(){this.getProducts(),this.getcart()},methods:{getProducts:function(){var t="https://vue-course-api.hexschool.io/api/exercise-api08/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),s=this;s.loadStatus.pageLoading=!0,this.$http.get(t).then(function(t){s.products=t.data.products,s.pagination=t.data.pagination,s.loadStatus.pageLoading=!1})},getProduct:function(t){var s="https://vue-course-api.hexschool.io/api/exercise-api08/product/"+t,e=this;e.ststus.more=t,this.$http.get(s).then(function(t){U()("#productModal").modal("show"),e.product=t.data.product,e.product.number=Number(1),e.subTotal=e.product.price,e.ststus.more=""}),console.log("number",Y()(e.product.number),"price",Y()(e.product.price),"num",Y()(e.product.num))},addcart:function(t){var s=this,e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.ststus.addCart=t,this.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/cart",{data:a}).then(function(t){t.data.success?(e.ststus.loandItem="",e.getcart(),U()("#productModal").modal("hide"),e.ststus.addCart="",s.$bus.$emit("messsage:push",t.data.message,"success")):s.$bus.$emit("messsage:push",t.data.message,"danger")})},getcart:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/cart").then(function(s){t.cartsTotal=s.data.data,t.carts=s.data.data.carts})},deleteModal:function(t){this.tempCart=t,U()("#delProductModal").modal("show")},deleteCart:function(t){var s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/cart/"+t,a=this;this.$http.delete(e).then(function(t){t.data.success?(a.getcart(),U()("#delProductModal").modal("hide"),s.$bus.$emit("messsage:push",t.data.message,"success")):s.$bus.$emit("messsage:push",t.data.message,"danger")})},addCounopCode:function(){var t=this,s=this;s.counop_code=s.counop_code.split(" ").join("");var e=s.coupons.find(function(t){return s.counop_code===t.coupon&&1===t.is_enabled}),a={data:{code:s.counop_code}};if(0!==s.carts.length)if(void 0!==e){this.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/coupon",{data:a}).then(function(e){console.log(e.data),e.data.success?(s.getcart(),t.$bus.$emit("messsage:push","已套用優惠卷:"+s.counop_code,"success")):t.$bus.$emit("messsage:push",e.data.message,"danger")})}else this.$bus.$emit("messsage:push","優惠碼無效","danger");else this.$bus.$emit("messsage:push","購物車沒有商品","danger")},createOrder:function(){var t=this,s=this;this.$validator.validate().then(function(e){e?t.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/order",{data:s.form}).then(function(t){t.data.success&&s.$router.push("/dashboard/customer_checkout/"+t.data.orderId),s.getcart()}):console.log("表單不完整")})},changeevent:function(){this.subTotal=Number(this.product.number)*Number(this.product.price)},getCoupon:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupons").then(function(s){s.data.success&&(t.coupons=s.data.coupons)})}},mounted:function(){this.getCoupon()}},K={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"row mt-4"},t._l(t.products,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4 list-group-item-action"},[e("div",{staticClass:"card border-0 shadow-sm h-100 list-group-item-action"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(s.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(s.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(s.origin_price))+" 元")]),t._v(" "),e("div",{staticClass:"h5"},[t._v("現在只要 "),e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(s.price)))]),t._v(" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(s.id)}}},[t.ststus.more===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\n                        查看更多\n                    ")],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addcart(s.id)}}},[t.ststus.addCart===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\n                        加到購物車\n                    ")],1)])])])}),0),t._v(" "),e("pagination",{attrs:{pagination:t.pagination},on:{getPages:t.getProducts}}),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-6"},[e("table",{staticClass:"table mt-5"},[t._m(0),t._v(" "),e("tbody",t._l(t.carts,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"text-center",on:{click:function(e){return e.preventDefault(),t.deleteModal(s)}}},[e("a",{attrs:{href:"#"}},[e("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fa","trash-alt"]}})],1)]),t._v(" "),e("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(s.product.title)+"\n                            "),s.coupon?e("div",{staticClass:"text-success"},[t._v("\n                                已套用優惠卷\n                            ")]):t._e()]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(s.qty))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(Math.floor(s.final_total))))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cartsTotal.total)))])]),t._v(" "),t.cartsTotal.total!==t.cartsTotal.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.cartsTotal.final_total)))])]):t._e()])]),t._v(" "),e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.counop_code,expression:"counop_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠"},domProps:{value:t.counop_code},on:{input:function(s){s.target.composing||(t.counop_code=s.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.addCounopCode}},[t._v("\n                        套用優惠碼\n                    ")])])])])]),t._v(" "),e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6",on:{submit:function(s){return s.preventDefault(),t.createOrder(s)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],class:["form-control",{"is-invalid":t.errors.has("email")}],attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v("\n                "+t._s(t.errors.first("email"))+"\n            ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],class:["form-control",{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("\n                    姓名必須輸入\n                ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],class:["form-control",{"is-invalid":t.errors.has("tel")}],attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),t._v(" "),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("\n                    電話必須輸入\n                ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],class:["form-control",{"is-invalid":t.errors.has("address")}],attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("\n                地址欄位不得留空\n            ")]):t._e()]),t._v(" "),t._m(1),t._v(" "),t._m(2)])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"productModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"productModal"}},[e("span",[t._v(t._s(t.product.title))])]),t._v(" "),t._m(3)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl}}),t._v(" "),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),e("div",{staticClass:"flex justify-content-between align-items-beseline"},[t.product.price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.product.origin_price))+" 元")]),t._v(" "),t.product.price?e("del",{staticClass:"h6"},[t._v("  原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元  ")]):t._e(),t._v(" "),t.product.price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(t.product.price))+"  元")]):t._e()]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.number,expression:"product.number"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"number",s.target.multiple?e:e[0])},t.changeevent]}},[e("option",{attrs:{disabled:"",value:""},domProps:{selected:!0}},[t._v("請選擇")]),t._v(" "),t._l(10,function(s){return e("option",{key:s,domProps:{value:s}},[t._v("選購"+t._s(s)+t._s(t.product.unit))])})],2)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n                        小計 "),e("strong",[t._v(t._s(t._f("currency")(t.subTotal)))])]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.addcart(t.product.id,t.product.number)}}},[t._v("加入購物車")])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"delProductModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(4),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n                是否刪除購物車 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCart.product.title))]),t._v(" 商品\n                "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCart.qty)+t._s(t.tempCart.product.unit))]),t._v("(刪除後將無法恢復)。\n            ")]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(s){return t.deleteCart(t.tempCart.id)}}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"text-center"},[this._v("刪除")]),this._v(" "),s("th",{staticClass:"text-center"},[this._v("品名")]),this._v(" "),s("th",{staticClass:"text-center"},[this._v("數量")]),this._v(" "),s("th",{staticClass:"text-center"},[this._v("單價")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[this._v("留言")]),this._v(" "),s("textarea",{staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger"},[this._v("送出訂單")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"delProductModal"}},[s("span",[this._v("刪除購物車商品")])]),this._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]},Q=e("VU/8")(X,K,!1,null,null,null).exports,Z={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.order.products,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(s.product.title))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(s.qty)+"/"+t._s(s.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(s.final_total))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),t._v(" "),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),t._v(" "),e("td",[t._v(t._s(t.user.email))])]),t._v(" "),e("tr",[e("th",[t._v("姓名")]),t._v(" "),e("td",[t._v(t._s(t.user.name))])]),t._v(" "),e("tr",[e("th",[t._v("收件人電話")]),t._v(" "),e("td",[t._v(t._s(t.user.tel))])]),t._v(" "),e("tr",[e("th",[t._v("收件人地址")]),t._v(" "),e("td",[t._v(t._s(t.user.address))])]),t._v(" "),e("tr",[e("th",[t._v("付款狀態")]),t._v(" "),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",[t._v("尚未付款")])])])])]),t._v(" "),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger",on:{click:function(s){return s.preventDefault(),t.payOrder(s)}}},[t._v("確認付款去")])]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("th",[this._v("品名")]),this._v(" "),s("th",[this._v("數量")]),this._v(" "),s("th",[this._v("單價")])])}]},G=e("VU/8")({data:function(){return{orderId:"",order:{},user:{}}},created:function(){this.orderId=this.$route.params.orderId,this.getorder()},methods:{getorder:function(){var t=this,s="https://vue-course-api.hexschool.io/api/exercise-api08/order/"+t.orderId;this.$http.get(s).then(function(s){t.order=s.data.order,t.user=s.data.order.user})},payOrder:function(){var t=this,s="https://vue-course-api.hexschool.io/api/exercise-api08/pay/"+t.orderId;this.$http.post(s).then(function(s){t.getorder()})}}},Z,!1,null,null,null).exports,tt={data:function(){return{Carts:[{product:{}}],tempCart:{product:{}},cartsNum:"0"}},methods:{getCarts:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/cart").then(function(s){s.data.success?(t.Carts=s.data.data.carts,t.cartsNum=t.Carts.length):console.log("錯誤提示")})}},mounted:function(){var t=this;this.getCarts(),t.$bus.$on("getCartsEvent",function(s){t.getCarts()})}},st={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[e("div",{staticClass:"mr-auto ml-3"},[e("font-awesome-icon",{staticClass:"mr-2",staticStyle:{color:"#ffc107"},attrs:{icon:["fa","plane-departure"]}}),t._v(" "),e("router-link",{staticClass:"text-white",staticStyle:{"text-decoration":"none"},attrs:{to:"/home"}},[t._v("漫步旅遊")])],1),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"collapse navbar-collapse mr-2",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav mx-auto"},[e("li",{staticClass:"nav-item active"},[e("router-link",{staticClass:"nav-link text-white",attrs:{to:"/home",href:"#"}},[t._v("Home")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link text-white",attrs:{to:"/products_list",href:"#"}},[t._v("商品列表")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link text-white",attrs:{to:"/carts_list",href:"#"}},[t._v("購物清單")])],1)]),t._v(" "),e("div",{staticClass:"mr-3"},[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-sm btn-cart border-0",attrs:{"data-toggle":"dropdown","data-flip":"false"},on:{click:t.getCarts,getCartsEvent:t.getCarts}},[e("font-awesome-icon",{staticClass:"text-white",attrs:{icon:["fa","shopping-cart"],size:"2x"}}),t._v(" "),e("span",{staticClass:"badge badge-danger rounded-circle"},[t._v(t._s(t.cartsNum))])],1),t._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{"min-width":"300px"}},[e("div",{staticClass:"px-4 py-3"},[e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.Carts,function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(s.product.title))]),t._v(" "),e("td",[t._v(t._s(s.qty)+"件")]),t._v(" "),e("td",[t._v("$"+t._s(s.total))])])}),0)]),t._v(" "),e("router-link",{attrs:{to:"/carts_list"}},[e("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"}},[t._v("前往結帳")])])],1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"navbar-toggler custom-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon "})])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",{attrs:{colspan:"4"}},[s("h6",[this._v("選擇商品")])])])])}]};var et={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("footer",{staticClass:"text-center py-5 footer ",staticStyle:{"text-decoration":"none"}},[e("div",{staticClass:"d-flex abc justify-content-center text-secondary font-weight-light"},[e("h6",{staticClass:"mr-2 "},[t._v("© Copright 2019 漫步旅遊")]),t._v(" "),e("a",{staticClass:"mr-2 font-weight-bold text-info",attrs:{href:"#"}},[t._v("Instagram")]),t._v(" "),e("a",{staticClass:"mr-2 font-weight-bold text-info",attrs:{href:"#"}},[t._v("Facebook ")]),t._v(" "),e("a",{staticClass:"font-weight-bold text-info",attrs:{href:"#"}},[t._v("About")])]),t._v(" "),e("h6",{staticClass:"text-center text-white font-weight-light"},[t._v("純屬個人作品")])])])}]};var at={components:{navBar:e("VU/8")(tt,st,!1,function(t){e("2+By")},"data-v-6a57f7c9",null).exports,footers:e("VU/8")(null,et,!1,function(t){e("erX+")},"data-v-2813473e",null).exports,AlertMessage:k}},it={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("navBar"),this._v(" "),s("AlertMessage"),this._v(" "),s("router-view"),this._v(" "),s("footers")],1)},staticRenderFns:[]},rt=e("VU/8")(at,it,!1,null,null,null).exports;U()(".carousel").carousel();var ot={data:function(){return{randomProducts:[],loadStatus:{pageLoading:!1}}},methods:{getProducts:function(){var t=this;t.loadStatus.pageLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/products/all").then(function(s){if(s.data.success)for(var e=0;e<6;){var a=s.data.products,i=Math.floor(Math.random()*s.data.products.length),r=a[i].title;if(0===t.randomProducts.length)t.randomProducts.push(s.data.products[i]),e++;else t.randomProducts.some(function(t,s,e){return t.title===r})||(t.randomProducts.push(s.data.products[i]),e++)}t.loadStatus.pageLoading=!1})}},mounted:function(){this.getProducts()}},nt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},t._l(t.randomProducts,function(s){return e("div",{key:s.id,staticClass:"card-group my-2 col-md-4"},[e("div",{staticClass:" card mx-2"},[e("div",{staticClass:"product-bg",style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(s.title))]),t._v(" "),e("router-link",{attrs:{to:"/products_list"}},[e("button",{staticClass:"btn btn-sm btn-outline-primary btn-lg btn-block",attrs:{type:"button"}},[t._v("更多")])])],1)])])}),0)])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"bd-example mb-5"},[a("div",{staticClass:"carousel slide",attrs:{id:"carouselExampleCaptions","data-ride":"carousel"}},[a("ol",{staticClass:"carousel-indicators"},[a("li",{staticClass:"active",attrs:{"data-target":"#carouselExampleCaptions","data-slide-to":"0"}}),t._v(" "),a("li",{attrs:{"data-target":"#carouselExampleCaptions","data-slide-to":"1"}}),t._v(" "),a("li",{attrs:{"data-target":"#carouselExampleCaptions","data-slide-to":"2"}}),t._v(" "),a("li",{attrs:{"data-target":"#carouselExampleCaptions","data-slide-to":"3"}}),t._v(" "),a("li",{attrs:{"data-target":"#carouselExampleCaptions","data-slide-to":"4"}})]),t._v(" "),a("div",{staticClass:"carousel-inner"},[a("div",{staticClass:"carousel-item active "},[a("img",{staticClass:"carousel-bg d-block w-100",attrs:{src:e("8m4O"),alt:"..."}}),t._v(" "),a("div",{staticClass:"carousel-caption d-none d-md-block bg-lighter"},[a("h5",{staticClass:"text-warning"},[t._v("紐西蘭——100% 純凈的紐西蘭")]),t._v(" "),a("p",[t._v("這句紐西蘭耳熟能詳的標語已大獲成功，這樣的小清新路線已成經典，紐西蘭是一片凈土，大部分景點都不需要門票費用，鳥兒在這裡沒有天敵，島上滿眼蒼翠的綠地，置身與此，仿佛可以觸摸到原始森林的力量，這裡舒服地似乎有些太過安逸。")])])]),t._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"carousel-bg d-block w-100",attrs:{src:e("t6KH"),alt:"..."}}),t._v(" "),a("div",{staticClass:"carousel-caption d-none d-md-block bg-lighter"},[a("h5",{staticClass:"text-warning"},[t._v("夏威夷——微笑的群島，這裡陽光燦爛!")]),t._v(" "),a("p",[t._v("陽光燦爛讓我們想到海灘的風和日麗以及夕陽西下的落日景象，可以划船衝浪也可以沿著沙灘散步。夏威夷處於太平洋的「十字路口」，是多種文化匯集交融的大熔爐，有著讓人完全放鬆的熱帶環境，也是情侶們夢想中的蜜月天堂。")])])]),t._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"carousel-bg d-block w-100",attrs:{src:e("JNEu"),alt:"..."}}),t._v(" "),a("div",{staticClass:"carousel-caption d-none d-md-block bg-lighter"},[a("h5",{staticClass:"text-warning"},[t._v("沖繩——在色彩絢麗夢幻般的珊瑚中游動，妙不可言！")]),t._v(" "),a("p",[t._v("青洞是沖繩必訪景點，盛名絕非空虛得來，一進入青洞內彷如進入另一個世界，洞內溫度光線比洞外低，水面顏色隨天氣、溫度、角度、陽光…變化，反射出的色彩美得讓人瞠目結舌，同一天的不同時間就有不同面貌。")])])]),t._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"carousel-bg d-block w-100",attrs:{src:e("2Qkz"),alt:"..."}}),t._v(" "),a("div",{staticClass:"carousel-caption d-none d-md-block bg-lighter"},[a("h5",{staticClass:"text-warning"},[t._v("非洲——陽光13月")]),t._v(" "),a("p",[t._v("衣索比亞有「非洲屋脊」之稱，在衣索比亞，最流行的旅遊口號是「享受13個月的陽光」。這源於衣索比亞全年宜人的氣候、溫暖的陽光以及有13個月的年曆，他們遵循古老的羅馬儒略曆法，每年共有13月，前12個月均有30天，而第13月有5天或6天(閏年)。這個標語也很好的體現了埃塞爾比亞全年陽光普照的特色。")])])]),t._v(" "),a("div",{staticClass:"carousel-item"},[a("img",{staticClass:"carousel-bg d-block w-100",attrs:{src:e("7zRH"),alt:"..."}}),t._v(" "),a("div",{staticClass:"carousel-caption d-none d-md-block bg-lighter"},[a("h5",{staticClass:"text-warning"},[t._v("澳大利亞——生機勃勃的原始叢林")]),t._v(" "),a("p",[t._v("有人說澳大利亞很豐富，豐富到你無法給她下定義，熱情，沉靜，野性，恬靜，前衛，古樸······充滿矛盾，又擁有一切。")])])])]),t._v(" "),a("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleCaptions",role:"button","data-slide":"prev"}},[a("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Previous")])]),t._v(" "),a("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleCaptions",role:"button","data-slide":"next"}},[a("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Next")])])])]),t._v(" "),a("hr")])}]};var ct=e("VU/8")(ot,nt,!1,function(t){e("sI+3")},null,null).exports,lt={data:function(){return{products:[],product:{},subTotal:"",Asia:[],Europe:[],Africa:[],Animate:"all_i",loadStatus:{pageLoading:!1},ststus:{more:"",addCart:""},jumbotronBg:e("D9+L")}},methods:{getProucts:function(t){var s=this,e=this,a=0,i="https://vue-course-api.hexschool.io/api/exercise-api08/products";e.loadStatus.pageLoading=!0,this.$http.get(i).then(function(t){for(var r=0;r<t.data.pagination.total_pages;r++)i="https://vue-course-api.hexschool.io/api/exercise-api08/products?page="+ ++a+"}",s.$http.get(i).then(function(t){for(var s=0;s<t.data.products.length;s++)e.products.push(t.data.products[s]),"歐洲"===t.data.products[s].category?e.Europe.push(t.data.products[s]):"東南亞"===t.data.products[s].category||"東北亞"===t.data.products[s].category||"台港澳"===t.data.products[s].category?e.Asia.push(t.data.products[s]):"非洲"===t.data.products[s].category&&e.Africa.push(t.data.products[s]);e.loadStatus.pageLoading=!1})})},openModal:function(t){var s=this;s.ststus.more=t.id,s.product=t,s.product.number=Number(1),s.subTotal=s.product.price,U()("#productModal").modal("show"),s.ststus.more=""},changeevent:function(){this.subTotal=Number(this.product.number)*Number(this.product.price)},selectArea:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all_i";this.Animate=t;var s="."+t;setTimeout(function(){document.querySelector(s).classList.add("animated","bounceInLeft")},100)},addcart:function(t){var s=this,e=this,a={product_id:t,qty:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1};e.ststus.addCart=t,this.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/cart",{data:a}).then(function(t){t.data.success?(e.$bus.$emit("getCartsEvent"),s.$bus.$emit("messsage:push",t.data.message,"success")):s.$bus.$emit("messsage:push",t.data.message,"danger"),e.ststus.addCart="",U()("#productModal").modal("hide")})}},mounted:function(){this.getProucts(),this.selectArea()}},dt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"jumbotron jumbotron-fluid jumbotron-bg d-flex align-items-end bt-4",style:{backgroundImage:"url("+t.jumbotronBg+")"}},[t._m(0)]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-2 "},[e("div",{staticClass:"list-group sticky-top",attrs:{id:"myList",role:"tablist"}},[e("a",{staticClass:"list-group-item list-group-item-action active",attrs:{"data-toggle":"list",href:"#all",role:"tab"},on:{click:function(s){return t.selectArea("all_i")}}},["all_i"===t.Animate?e("font-awesome-icon",{staticClass:"all_i mr-2",staticStyle:{color:"#ffc107"},attrs:{icon:["fa","plane"]}}):t._e(),t._v("全部\r\n                        ")],1),t._v(" "),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{"data-toggle":"list",href:"#Asia",role:"tab"},on:{click:function(s){return t.selectArea("asia_i")}}},["asia_i"===t.Animate?e("font-awesome-icon",{staticClass:"asia_i mr-2",staticStyle:{color:"#ffc107"},attrs:{icon:["fa","plane"]}}):t._e(),t._v("亞洲\r\n                        ")],1),t._v(" "),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{"data-toggle":"list",href:"#Europe",role:"tab"},on:{click:function(s){return t.selectArea("europe_i")}}},["europe_i"==t.Animate?e("font-awesome-icon",{staticClass:"europe_i mr-2",staticStyle:{color:"#ffc107"},attrs:{icon:["fa","plane"]}}):t._e(),t._v("歐洲\r\n                        ")],1),t._v(" "),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{"data-toggle":"list",href:"#Africa",role:"tab"},on:{click:function(s){return t.selectArea("africa_i")}}},["africa_i"===t.Animate?e("font-awesome-icon",{staticClass:"africa_i mr-2",staticStyle:{color:"#ffc107"},attrs:{icon:["fa","plane"]}}):t._e(),t._v("非洲\r\n                        ")],1)])]),t._v(" "),e("div",{staticClass:"col-10"},[e("div",{staticClass:"tab-content"},[e("div",{staticClass:"tab-pane active",attrs:{id:"all",role:"tabpanel"}},[e("div",{staticClass:"row"},t._l(t.products,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4 list-group-item-action"},[e("div",{staticClass:"card border-0 shadow-sm h-100 list-group-item-action"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(s.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(s.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(s.origin_price))+" 元")]),t._v(" "),e("div",{staticClass:"h6 "},[t._v("現在只要 "),e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(s.price)))]),t._v(" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openModal(s)}}},[t.ststus.more===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    查看更多\r\n                                                ")],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addcart(s.id)}}},[t.ststus.addCart===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    加到購物車\r\n                                                ")],1)])])])}),0)]),t._v(" "),e("div",{staticClass:"tab-pane",attrs:{id:"Asia",role:"tabpanel"}},[e("div",{staticClass:"row"},t._l(t.Asia,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4 list-group-item-action"},[e("div",{staticClass:"card border-0 shadow-sm h-100 list-group-item-action"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(s.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(s.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(s.origin_price))+" 元")]),t._v(" "),e("div",{staticClass:"h6"},[t._v("現在只要 "),e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(s.price)))]),t._v(" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openModal(s)}}},[t.ststus.more===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    查看更多\r\n                                                ")],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addcart(s.id)}}},[t.ststus.addCart===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    加到購物車\r\n                                                ")],1)])])])}),0)]),t._v(" "),e("div",{staticClass:"tab-pane",attrs:{id:"Europe",role:"tabpanel"}},[e("div",{staticClass:"row"},t._l(t.Europe,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4 list-group-item-action"},[e("div",{staticClass:"card border-0 shadow-sm h-100 list-group-item-action"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(s.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(s.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(s.origin_price))+" 元")]),t._v(" "),e("div",{staticClass:"h6"},[t._v("現在只要 "),e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(s.price)))]),t._v(" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openModal(s)}}},[t.ststus.more===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    查看更多\r\n                                                ")],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addcart(s.id)}}},[t.ststus.addCart===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v(" "),t._v("\r\n                                                    加到購物車\r\n                                                ")],1)])])])}),0)]),t._v(" "),e("div",{staticClass:"tab-pane",attrs:{id:"Africa",role:"tabpanel"}},[e("div",{staticClass:"row"},t._l(t.Africa,function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4 list-group-item-action"},[e("div",{staticClass:"card border-0 shadow-sm h-100 list-group-item-action"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:["",{backgroundImage:"url("+s.imageUrl+")"}]}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(s.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(s.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(s.origin_price))+" 元")]),t._v(" "),e("div",{staticClass:"h6"},[t._v("現在只要 "),e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(s.price)))]),t._v(" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openModal(s)}}},[t.ststus.more===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v("\r\n                                                    查看更多\r\n                                                ")],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addcart(s.id)}}},[t.ststus.addCart===s.id?e("font-awesome-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:["fa","spinner"],spin:""}}):t._e(),t._v(" "),t._v("\r\n                                                    加到購物車\r\n                                                ")],1)])])])}),0)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"productModal","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"productModal"}},[e("span",[t._v(t._s(t.product.title))])]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl}}),t._v(" "),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),e("div",{staticClass:"flex justify-content-between align-items-beseline"},[t.product.price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.product.origin_price))+" 元")]),t._v(" "),t.product.price?e("del",{staticClass:"h6"},[t._v("  原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元  ")]):t._e(),t._v(" "),t.product.price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(t.product.price))+"  元")]):t._e()]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.number,expression:"product.number"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"number",s.target.multiple?e:e[0])},t.changeevent]}},[e("option",{attrs:{disabled:"",value:""},domProps:{selected:!0}},[t._v("請選擇")]),t._v(" "),t._l(10,function(s){return e("option",{key:s,domProps:{value:s}},[t._v("選購"+t._s(s)+t._s(t.product.unit))])})],2)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\r\n                            小計 "),e("strong",[t._v(t._s(t._f("currency")(t.subTotal)))])]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(s){return t.addcart(t.product.id,t.product.number)}}},[t._v("加入購物車")])])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"bg-lighter p-4 text-xl"},[s("h2",{staticClass:"display-4 font-weight-bold h1"},[this._v("愛，旅遊")]),this._v(" "),s("p",{staticClass:"lead"},[this._v("比起走了多少公里，一路上結交了多少朋友是衡量一趟旅行更好的方式.")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var ut=e("VU/8")(lt,dt,!1,function(t){e("dyni")},null,null).exports,pt={data:function(){return{carts:[{product:{}}],cartsTotal:{},counop_code:"",loadStatus:{pageLoading:!1},coupons:[]}},methods:{getCarts:function(){var t=this;t.loadStatus.pageLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/cart").then(function(s){s.data.success?(t.carts=s.data.data.carts,t.cartsTotal=s.data.data):console.log("錯誤提示"),t.loadStatus.pageLoading=!1})},addCounopCode:function(){var t=this,s=this;s.counop_code=s.counop_code.split(" ").join("");var e=s.coupons.find(function(t){return s.counop_code===t.coupon&&1===t.is_enabled}),a={data:{code:s.counop_code}};if(0!==s.carts.length)if(void 0!==e){this.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/coupon",{data:a}).then(function(e){console.log(e.data),e.data.success?(s.getCarts(),t.$bus.$emit("messsage:push","已套用優惠卷:"+s.counop_code,"success")):t.$bus.$emit("messsage:push",e.data.message,"danger")})}else this.$bus.$emit("messsage:push","優惠碼無效","danger");else this.$bus.$emit("messsage:push","購物車沒有商品","danger")},deleteCart:function(t){var s=this,e="https://vue-course-api.hexschool.io/api/exercise-api08/cart/"+t,a=this;this.$http.delete(e).then(function(t){t.data.success?(a.getCarts(),U()("#deletProductModal").modal("hide"),a.$bus.$emit("getCartsEvent"),s.$bus.$emit("messsage:push",t.data.message,"success")):s.$bus.$emit("messsage:push",t.data.message,"danger")})},toOrderPage:function(){0!==this.carts.length?this.$router.push("/client_orders_check"):this.$bus.$emit("messsage:push","目前購物車沒有商品","info")},getCoupon:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/admin/coupons").then(function(s){s.data.success&&(t.coupons=s.data.coupons)})}},mounted:function(){var t=this;this.getCarts(),this.getCoupon(),t.$bus.$on("getCartsEvent",function(s){t.getCarts()})}},vt={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row my-2 "},[e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"row justify-content-center"},[e("table",{staticClass:"table mt-5"},[t._m(0),t._v(" "),e("tbody",t._l(t.carts,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"text-center",on:{click:function(e){return e.preventDefault(),t.deleteCart(s.id)}}},[e("a",{attrs:{href:"#"}},[e("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["fa","trash-alt"]}})],1)]),t._v(" "),e("td",[e("img",{staticClass:"img-fluid",attrs:{src:s.product.imageUrl,alt:""}})]),t._v(" "),e("td",{staticClass:"text-center"},[t._v("\n                                    "+t._s(s.product.title)+"\n                                    "),s.coupon?e("div",{staticClass:"text-success"},[t._v("\n                                        已套用優惠卷\n                                    ")]):t._e()]),t._v(" "),e("td",{staticClass:"text-center"},[t._v(t._s(s.qty))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(s.final_total)))])])}),0)])])]),t._v(" "),e("div",{staticClass:"col-md-4 my-5 d-flex justify-content-center"},[e("div",{staticClass:"card ",staticStyle:{width:"18rem"}},[t._m(1),t._v(" "),e("div",{staticClass:"card-body "},[e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("div",{staticClass:"h5"},[t._v("商品總計")]),t._v(" "),t.cartsTotal.final_total===t.cartsTotal.total?e("div",{staticClass:"h5"},[e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(t.cartsTotal.total)))]),t._v(" 元")]):e("del",{staticClass:"h5"},[e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(t.cartsTotal.total)))]),t._v(" 元")])]),t._v(" "),e("div",{staticClass:"input-group mb-3 input-group-sm my-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.counop_code,expression:"counop_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠"},domProps:{value:t.counop_code},on:{input:function(s){s.target.composing||(t.counop_code=s.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.addCounopCode}},[t._v("\n                                    套用優惠碼\n                                ")])])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.cartsTotal.final_total===t.cartsTotal.total?e("div",{staticClass:"h5"},[t._v("結帳總金額")]):e("div",{staticClass:"h5"},[t._v("折扣價金額")]),t._v(" "),e("div",{staticClass:"h5"},[e("span",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(t.cartsTotal.final_total)))]),t._v(" 元")])]),t._v(" "),e("div",{staticClass:"text-right mt-2"},[e("button",{staticClass:"btn btn-danger",on:{click:t.toOrderPage}},[t._v("前往結帳")])])])])])])])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("刪除")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("圖片")]),t._v(" "),e("th",{staticClass:"text-center"},[t._v("品名")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("數量")]),t._v(" "),e("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("單價")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card-head bg-secondary"},[s("h5",{staticClass:"card-title ml-4 mt-2 text-white"},[this._v("訂單摘要")])])}]},mt=e("VU/8")(pt,vt,!1,null,null,null).exports,_t={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.loadStatus.pageLoading},on:{"update:active":function(s){return t.$set(t.loadStatus,"pageLoading",s)}}}),t._v(" "),e("div",{staticClass:"container mt-5"},[e("h2",{staticClass:"text-center text-secondary mb-2"},[t._v("血拚結帳")]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"col"},[e("div",{class:["alert alert-secondary rounded-pill text-center",{"alert-success":"step1"===t.orderStatus}],attrs:{role:"alert"}},[t._v("\r\n                    1.輸入訂單資料\r\n                ")])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{class:["alert alert-secondary rounded-pill text-center",{"alert-success":"step2"===t.orderStatus}],attrs:{role:"alert"}},[t._v("\r\n                    2.金流付款\r\n                ")])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{class:["alert alert-secondary rounded-pill text-center",{"alert-success":"step3"===t.orderStatus}],attrs:{role:"alert"}},[t._v("\r\n                    3.完成\r\n                ")])])])]),t._v(" "),e("div",{staticClass:"container mb-5"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-8"},["step1"===t.orderStatus?e("div",{staticClass:"accordion mb-4",attrs:{id:"accordionExample"}},[e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.carts,function(s){return e("tr",{key:s.id,staticClass:"align-items-center"},[e("td",{staticClass:"align-middle text-center"},[t._v(t._s(s.product.title))]),t._v(" "),e("td",{staticClass:"align-middle"},[e("img",{staticClass:"img-fluid",attrs:{src:s.product.imageUrl,alt:"",width:"90",height:"60"}})]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(s.qty)+t._s(s.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(s.final_total)))])])}),0),t._v(" "),e("tfoot",[t._m(2),t._v(" "),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("合計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cartsTotal.final_total)))])])])])])])]):t._e(),t._v(" "),"step1"===t.orderStatus?e("form",{on:{submit:function(s){return s.preventDefault(),t.createOrder(s)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],class:["form-control",{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("\r\n                                    姓名必須輸入\r\n                                ")]):t._e()])]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],class:["form-control",{"is-invalid":t.errors.has("email")}],attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v("\r\n                                "+t._s(t.errors.first("email"))+"\r\n                            ")]):t._e()])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],class:["form-control",{"is-invalid":t.errors.has("tel")}],attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),t._v(" "),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("\r\n                            電話必須輸入\r\n                        ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),t._v(" "),e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],class:["form-control",{"is-invalid":t.errors.has("address")}],attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("\r\n                            地址欄位不得留空\r\n                        ")]):t._e()]),t._v(" "),t._m(3),t._v(" "),t._m(4)]):t._e(),t._v(" "),"step2"===t.orderStatus||"step3"===t.orderStatus?e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-8"},[e("table",{staticClass:"table"},[t._m(5),t._v(" "),e("tbody",t._l(t.order.products,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(s.product.title))]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(s.qty)+"/"+t._s(s.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(s.final_total)))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),t._v(" "),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),t._v(" "),e("td",[t._v(t._s(t.user.email))])]),t._v(" "),e("tr",[e("th",[t._v("姓名")]),t._v(" "),e("td",[t._v(t._s(t.user.name))])]),t._v(" "),e("tr",[e("th",[t._v("收件人電話")]),t._v(" "),e("td",[t._v(t._s(t.user.tel))])]),t._v(" "),e("tr",[e("th",[t._v("收件人地址")]),t._v(" "),e("td",[t._v(t._s(t.user.address))])]),t._v(" "),e("tr",[e("th",[t._v("付款狀態")]),t._v(" "),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",[t._v("尚未付款")])])])])]),t._v(" "),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger",on:{click:function(s){return s.preventDefault(),t.payOrder(s)}}},[t._v("確認付款去")])]):t._e()])]):t._e()])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[s("button",{staticClass:"btn btn-link d-flex",staticStyle:{position:"relative","text-decoration":"none"},attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[this._v("\r\n                                顯示購物車細節                    \r\n                            ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"text-center",attrs:{scope:"col"}},[this._v("商品名稱")]),this._v(" "),s("th",{staticClass:"text-center",attrs:{scope:"col",width:"120"}},[this._v("圖片")]),this._v(" "),s("th",{staticClass:"text-center",attrs:{scope:"col",width:"120"}},[this._v("數量")]),this._v(" "),s("th",{staticClass:"text-center",attrs:{scope:"col",width:"120"}},[this._v("小計")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[this._v("運費")]),this._v(" "),s("td",{staticClass:"text-right"},[this._v("$60")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[this._v("留言")]),this._v(" "),s("textarea",{staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger"},[this._v("送出訂單")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("th",[this._v("品名")]),this._v(" "),s("th",[this._v("數量")]),this._v(" "),s("th",[this._v("單價")])])}]},ht=e("VU/8")({data:function(){return{carts:[{product:{}}],cartsTotal:{},form:{user:{}},orderStatus:"step1",orderId:"",order:{},user:{},loadStatus:{pageLoading:!1}}},methods:{getCarts:function(){var t=this;t.loadStatus.pageLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/exercise-api08/cart").then(function(s){s.data.success?(t.carts=s.data.data.carts,t.cartsTotal=s.data.data,t.loadStatus.pageLoading=!1):t.loadStatus.pageLoading=!1})},getOrder:function(){var t=this,s="https://vue-course-api.hexschool.io/api/exercise-api08/order/"+t.orderId;this.$http.get(s).then(function(s){t.order=s.data.order,t.user=s.data.order.user})},createOrder:function(){var t=this,s=this;s.loadStatus.pageLoading=!0,this.$validator.validate().then(function(e){e?t.$http.post("https://vue-course-api.hexschool.io/api/exercise-api08/order",{data:s.form}).then(function(t){t.data.success&&(s.orderId=t.data.orderId,s.$bus.$emit("getCartsEvent"),s.orderStatus="step2",s.loadStatus.pageLoading=!1)}):s.loadStatus.pageLoading=!1})},payOrder:function(){var t=this,s="https://vue-course-api.hexschool.io/api/exercise-api08/pay/"+t.orderId;t.loadStatus.pageLoading=!0,this.$http.post(s).then(function(s){t.getOrder(),t.orderStatus="step3",t.loadStatus.pageLoading=!1})}},mounted:function(){this.getCarts()},watch:{orderId:function(){this.getOrder()}}},_t,!1,null,null,null).exports;a.a.use(f.a);var gt=new f.a({routes:[{path:"*",redirect:"/home"},{path:"/login",name:"login",component:L},{path:"/dashboard",name:"dashboard",component:E,meta:{requiresAuth:!0},children:[{path:"products",name:"products",component:R,meta:{requiresAuth:!0}},{path:"orders",name:"orders",component:z,meta:{requiresAuth:!0}},{path:"coupon",name:"coupon",component:W,meta:{requiresAuth:!0}},{path:"simulationorder",name:"simulationorder",component:Q,meta:{requiresAuth:!0}},{path:"customer_checkout/:orderId",name:"customerCheckout",component:G,meta:{requiresAuth:!0}}]},{path:"/",redirect:"/home"},{path:"/",name:"fronend",component:rt,children:[{path:"home",name:"home",component:ct},{path:"products_list",name:"productsList",component:ut},{path:"carts_list",name:"cartsList",component:mt},{path:"client_orders_check",name:"clientOrdersCheck",component:ht}]}]});a.a.prototype.$bus=new a.a;d.c.add(u.d,u.c,u.b,u.f,u.i,u.e,u.g,u.a,u.h),a.a.component("font-awesome-icon",p.a),a.a.use(v.a),v.a.Validator.localize("zh_TW",_.a),a.a.use(n.a,r.a),a.a.config.productionTip=!1,a.a.component("Loading",l.a),a.a.filter("currency",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,s,e){return s&&"."!==t&&(e.length-s)%3==0?(", "+t).replace(/\s/g,""):t})}),r.a.defaults.withCredentials=!0,new a.a({el:"#app",router:gt,components:{App:g},template:"<App/>"}),gt.beforeEach(function(t,s,e){if(t.meta.requiresAuth){r.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?e():e({path:"/login"})})}else e()})},SYh3:function(t,s){},bSdT:function(t,s){},"bu+X":function(t,s){},dyni:function(t,s){},"erX+":function(t,s){},oPmM:function(t,s){},"sI+3":function(t,s){},t6KH:function(t,s,e){t.exports=e.p+"static/img/bg-2.accff89.jpg"},xq6e:function(t,s,e){t.exports=e.p+"static/img/travel.15ad6c3.jpg"}},["NHnr"]);
//# sourceMappingURL=app.4a964c9ba1d583d67b95.js.map